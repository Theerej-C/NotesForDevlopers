- The modules are the building block of the code sharing in the terraform where the code reusability comes to play.
- With Terraform, you can put your code inside of a Terraform module and reuse that module in multiple places throughout your code.
- ![[Pasted image 20240321222814.png]]
- A Terraform module is very simple: any set of Terraform configuration files in a folder is a module. if you run apply directly on a module, itâ€™s referred to as a root module.
- We can use a module in any area where the syntax is the:
```
module "<NAME>" {
source = "<SOURCE>"
[CONFIG ...]
}
// Eg:
module "webserver_cluster" {
source = "../../../modules/services/webserver-cluster"
}
```
* Note that whenever you add a module to your Terraform configurations or modify the source parameter of a module, you need to run the init command before you run plan or apply.
* We had the hard coded name in the files so we need to have the inputs in the modules.
## Inputs:
- Terraform, modules can have input parameters, too. To define them, you use a mechanism : input variables.
- We should set the variable name in the modules using the same variables.tf file in the modules and then we need to mention this in the main.tf of the modules:
```
variable "cluster_name" {
description = "The name to use for all the cluster resources"
type = string
}
```
- Then in the place where we use this module use this variable as the input like:
```
module "webserver_cluster" {
source = "../../../modules/services/webserver-cluster"
cluster_name = "webservers-stage"
db_remote_state_bucket = "(YOUR_BUCKET_NAME)"
db_remote_state_key = "stage/data-stores/mysql/terraform.tfstate"
}
```
* The input variables are the API of the module, controlling how it will behave in different environments.
* 
